<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">


<f:metadata>
   <f:viewParam name="id" value="#{deleteMagicCityBean.cityId}"/>
   <f:event type="preRenderView" listener="#{deleteMagicCityBean.loadCity}"/>
</f:metadata>

<h:head>
   <title>–£–¥–∞–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞</title>
      <h:outputStylesheet library="css" name="styles.css"/>
</h:head>

<h:body>
   <div class="container-compact">
      <h1>üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞</h1>

      <div class="section-bottom">
         <h:link outcome="cities" value="‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É" styleClass="btn btn-secondary"/>
      </div>

      <h:messages/>

      <ui:fragment rendered="#{deleteMagicCityBean.city != null}">
         <div class="warning-box">
            <h3>‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ!</h3>
            <p>–í—ã —Å–æ–±–∏—Ä–∞–µ—Ç–µ—Å—å —É–¥–∞–ª–∏—Ç—å –≥–æ—Ä–æ–¥. –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
         </div>

         <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥–æ—Ä–æ–¥–µ:</h3>
         <table class="details-table">
            <tr>
               <th>ID</th>
               <td>#{deleteMagicCityBean.city.id}</td>
            </tr>
            <tr>
               <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
               <td>#{deleteMagicCityBean.city.name}</td>
            </tr>
            <tr>
               <th>–ü–ª–æ—â–∞–¥—å</th>
               <td>#{deleteMagicCityBean.city.area}</td>
            </tr>
            <tr>
               <th>–ù–∞—Å–µ–ª–µ–Ω–∏–µ</th>
               <td>#{deleteMagicCityBean.city.population}</td>
            </tr>
            <tr>
               <th>–ü—Ä–∞–≤–∏—Ç–µ–ª—å</th>
               <td>#{deleteMagicCityBean.city.governor}</td>
            </tr>
         </table>

         <h:form>
            <h:commandButton value="‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ"
                             action="#{deleteMagicCityBean.initiateDeletion}"
                             styleClass="btn btn-danger"/>

            <h:link outcome="view-city" value="‚ùå –û—Ç–º–µ–Ω–∞" styleClass="btn btn-secondary">
               <f:param name="id" value="#{deleteMagicCityBean.city.id}"/>
            </h:link>
         </h:form>
      </ui:fragment>

      <ui:fragment rendered="#{deleteMagicCityBean.city == null}">
         <p class="text-danger">–ì–æ—Ä–æ–¥ —Å ID #{deleteMagicCityBean.cityId} –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>
      </ui:fragment>
   </div>

   <!-- –î–∏–∞–ª–æ–≥ –ø–µ—Ä–µ—Å–µ–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤ -->
   <h:form id="reassignmentDialogForm" rendered="#{deleteMagicCityBean.showDeleteDialog}">
      <div class="dialog-overlay">
         <div class="dialog-content">
            <h2>üèôÔ∏è –ü–µ—Ä–µ—Å–µ–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤</h2>

            <div class="info-box">
               <p>–í –≥–æ—Ä–æ–¥–µ <strong>#{deleteMagicCityBean.city.name}</strong> –ø—Ä–æ–∂–∏–≤–∞–µ—Ç
                  <strong>#{deleteMagicCityBean.deletionAnalysis.affectedCreaturesCount}</strong> —Å—É—â–µ—Å—Ç–≤.</p>
               <p>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –≥–æ—Ä–æ–¥ –¥–ª—è –ø–µ—Ä–µ—Å–µ–ª–µ–Ω–∏—è:</p>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤ –≤ –≥–æ—Ä–æ–¥–µ -->
            <h4>üó∫Ô∏è –°—É—â–µ—Å—Ç–≤–∞ –≤ —ç—Ç–æ–º –≥–æ—Ä–æ–¥–µ:</h4>
            <div class="creature-list">
               <ul>
                  <ui:repeat value="#{deleteMagicCityBean.deletionAnalysis.affectedCreatures}" var="creature">
                     <li>#{creature.name} (ID: #{creature.id})</li>
                  </ui:repeat>
               </ul>
            </div>

            <!-- –í—ã–±–æ—Ä –Ω–æ–≤–æ–≥–æ –≥–æ—Ä–æ–¥–∞ -->
            <div class="section">
               <h:outputLabel for="newCity" value="–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –≥–æ—Ä–æ–¥ –¥–ª—è –ø–µ—Ä–µ—Å–µ–ª–µ–Ω–∏—è:"/>
               <h:selectOneMenu id="newCity" value="#{deleteMagicCityBean.selectedNewCityId}" >
                  <f:selectItem itemLabel="-- –û—Å—Ç–∞–≤–∏—Ç—å –±–µ–∑ –≥–æ—Ä–æ–¥–∞ --" itemValue=""/>
                  <f:selectItems value="#{deleteMagicCityBean.deletionAnalysis.availableCities}"
                                 var="availableCity"
                                 itemLabel="#{availableCity.name} (ID: #{availableCity.id})"
                                 itemValue="#{availableCity.id}"/>
               </h:selectOneMenu>
            </div>

            <div class="section-top">
               <h:commandButton value="‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ —Å –ø–µ—Ä–µ—Å–µ–ª–µ–Ω–∏–µ–º"
                                action="#{deleteMagicCityBean.performDeletion}"
                                styleClass="btn btn-danger"/>

               <h:commandButton value="‚ùå –û—Ç–º–µ–Ω–∞"
                                action="#{deleteMagicCityBean.cancelDeletion}"
                                styleClass="btn btn-secondary"/>
            </div>
         </div>
      </div>
   </h:form>
</h:body>
</html>

