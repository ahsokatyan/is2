<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">


<h:head>
    <title>–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</title>
       <h:outputStylesheet library="css" name="styles.css"/>
</h:head>

<h:body>
    <div class="container-medium">
        <h1>‚ö° –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h1>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="section-bottom">
            <h:form>
                <h:commandButton value="üè† –ì–ª–∞–≤–Ω–∞—è" action="#{navigationBean.goToHome}" styleClass="btn"/>
                <h:commandButton value="üìñ –°—É—â–µ—Å—Ç–≤–∞" action="#{navigationBean.goToCreatures}" styleClass="btn"/>
                <h:commandButton value="üèôÔ∏è –ì–æ—Ä–æ–¥–∞" action="#{navigationBean.goToCities}" styleClass="btn"/>
                <h:commandButton value="üíç –ö–æ–ª—å—Ü–∞" action="#{navigationBean.goToRings}" styleClass="btn"/>
            </h:form>
        </div>

        <h:messages styleClass="messages"/>

        <!-- –û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ -->
        <ui:fragment rendered="#{specialOperationsBean.operationResult != null}">
            <div class="result-box">
                <h4>üìù –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏:</h4>
                <p>#{specialOperationsBean.operationResult}</p>
            </div>
        </ui:fragment>

        <!-- –û–ø–µ—Ä–∞—Ü–∏—è 1: –£–¥–∞–ª–∏—Ç—å –ø–æ attackLevel -->
        <div class="operation-section">
            <div class="operation-header">
                <h3>üóëÔ∏è –û–ø–µ—Ä–∞—Ü–∏—è 1: –£–¥–∞–ª–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–∞ –ø–æ attackLevel</h3>
            </div>
            <p>–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è attackLevel –∫–æ—Ç–æ—Ä–æ–≥–æ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É</p>

            <h:form rendered="#{!specialOperationsBean.showAttackLevelConfirmation}">
                <div class="form-group">
                    <h:outputLabel for="attackLevel" value="–ó–Ω–∞—á–µ–Ω–∏–µ attackLevel:"/>
                    <h:inputText id="attackLevel" value="#{specialOperationsBean.attackLevelToDelete}"
                                 required="true" styleClass="input-short" label="–ó–Ω–∞—á–µ–Ω–∏–µ attackLevel">
                        <f:validateLongRange minimum="1"/>
                    </h:inputText>
                </div>

                <h:commandButton value="üîç –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"
                                 action="#{specialOperationsBean.deleteByAttackLevel}"
                                 styleClass="btn btn-warning"/>
            </h:form>

            <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ -->
            <ui:fragment rendered="#{specialOperationsBean.showAttackLevelConfirmation}">
                <div class="result-box">
                    <h4>üìä –ê–Ω–∞–ª–∏–∑ –æ–ø–µ—Ä–∞—Ü–∏–∏:</h4>
                    <p><strong>–ë—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ:</strong> #{specialOperationsBean.deletionAnalysis.creaturesToDelete.size()} —Å—É—â–µ—Å—Ç–≤ —Å attackLevel = #{specialOperationsBean.deletionAnalysis.targetAttackLevel}</p>
                    <p><strong>–ö–æ–ª–µ—Ü –æ—Ç —É–¥–∞–ª—è–µ–º—ã—Ö —Å—É—â–µ—Å—Ç–≤:</strong> #{specialOperationsBean.deletionAnalysis.ringsFromDeletedCreatures.size()}</p>
                    <p><strong>–°–≤–æ–±–æ–¥–Ω—ã—Ö —Å—É—â–µ—Å—Ç–≤ (–±–µ–∑ –∫–æ–ª–µ—Ü):</strong> #{specialOperationsBean.deletionAnalysis.creaturesWithoutRings.size()}</p>
                </div>

                <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–æ–∫ (–ø–µ—Ä–≤—ã–µ 20) -->
                <ui:fragment rendered="#{specialOperationsBean.ringsToReassign.size() > 0}">
                    <div class="result-box">
                        <h4>üíç –ü—Ä–∏–≤—è–∑–∫–∏ –∫–æ–ª–µ—Ü –∫ —Å—É—â–µ—Å—Ç–≤–∞–º (–ø–æ–∫–∞–∑–∞–Ω—ã –ø–µ—Ä–≤—ã–µ 20):</h4>
                        <table class="table">
                            <tr>
                                <th>–ö–æ–ª—å—Ü–æ (ID)</th>
                                <th>–ö–æ–ª—å—Ü–æ (–ù–∞–∑–≤–∞–Ω–∏–µ)</th>
                                <th>–ù–æ–≤–æ–µ —Å—É—â–µ—Å—Ç–≤–æ (ID)</th>
                                <th>–ù–æ–≤–æ–µ —Å—É—â–µ—Å—Ç–≤–æ (–ò–º—è)</th>
                            </tr>
                            <ui:repeat value="#{specialOperationsBean.ringsToReassign}" var="ring"
                                       varStatus="status">
                                <ui:fragment rendered="#{status.index lt 20}">
                                    <tr>
                                        <td>#{ring.id}</td>
                                        <td>#{ring.name}</td>
                                        <td>#{specialOperationsBean.ringsToReassignTo[status.index].id}</td>
                                        <td>#{specialOperationsBean.ringsToReassignTo[status.index].name}</td>
                                    </tr>
                                </ui:fragment>
                            </ui:repeat>
                        </table>
                        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–∏–≤—è–∑–∫–∞—Ö -->
                        <ui:fragment rendered="#{specialOperationsBean.ringsToReassign.size() > 20}">
                            <p class="text-muted mt-10">
                                ... –∏ –µ—â–µ #{specialOperationsBean.ringsToReassign.size() - 20} –ø—Ä–∏–≤—è–∑–æ–∫(–∫–∏/–æ–∫)
                            </p>
                        </ui:fragment>
                    </div>
                </ui:fragment>

                <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–µ—Ü –±–µ–∑ —Ö–æ–∑—è–∏–Ω–∞ -->
                <ui:fragment rendered="#{specialOperationsBean.ringsWithoutOwner.size() > 0}">
                    <div class="result-box">
                        <h4>‚ö†Ô∏è –ö–æ–ª—å—Ü–∞ –±–µ–∑ —Ö–æ–∑—è–∏–Ω–∞ (–æ—Å—Ç–∞–Ω—É—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω—ã–º–∏):</h4>
                        <table class="table">
                            <tr>
                                <th>ID</th>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–°–∏–ª–∞</th>
                                <th>–í–µ—Å</th>
                            </tr>
                            <ui:repeat value="#{specialOperationsBean.ringsWithoutOwner}" var="ring"
                                       varStatus="status">
                                <ui:fragment rendered="#{status.index lt 20}">
                                    <tr>
                                        <td>#{ring.id}</td>
                                        <td>#{ring.name}</td>
                                        <td>#{ring.power != null ? ring.power : '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}</td>
                                        <td>#{ring.weight}</td>
                                    </tr>
                                </ui:fragment>
                            </ui:repeat>
                        </table>
                        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–ª—å—Ü–∞—Ö –±–µ–∑ —Ö–æ–∑—è–µ–≤ -->
                        <ui:fragment rendered="#{specialOperationsBean.ringsWithoutOwner.size() > 20}">
                            <p class="text-muted mt-10">
                                ... –∏ –µ—â–µ #{specialOperationsBean.ringsWithoutOwner.size() - 20} –∫–æ–ª–µ—Ü(—Ü–∞/—Ü) –±–µ–∑ —Ö–æ–∑—è–∏–Ω–∞
                            </p>
                        </ui:fragment>
                    </div>
                </ui:fragment>

                <!-- –ö–Ω–æ–ø–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
                <h:form>
                    <h:commandButton value="‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å"
                                     action="#{specialOperationsBean.confirmDeleteByAttackLevel}"
                                     styleClass="btn btn-danger"/>
                    <h:commandButton value="‚ùå –û—Ç–º–µ–Ω–∏—Ç—å"
                                     action="#{specialOperationsBean.cancelDeleteByAttackLevel}"
                                     styleClass="btn btn-primary"
                                     class="ml-10"/>
                </h:form>
            </ui:fragment>
        </div>

        <!-- –û–ø–µ—Ä–∞—Ü–∏—è 2: –ù–∞–π—Ç–∏ —Å—É—â–µ—Å—Ç–≤–æ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–∞—Ç–æ–π —Å–æ–∑–¥–∞–Ω–∏—è -->
        <div class="operation-section">
            <div class="operation-header">
                <h3>üìÖ –û–ø–µ—Ä–∞—Ü–∏—è 2: –ù–∞–π—Ç–∏ —Å–∞–º–æ–µ –Ω–æ–≤–æ–µ —Å—É—â–µ—Å—Ç–≤–æ</h3>
            </div>
            <p>–í–µ—Ä–Ω—É—Ç—å –æ–¥–∏–Ω (–ª—é–±–æ–π) –æ–±—ä–µ–∫—Ç, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è creationDate –∫–æ—Ç–æ—Ä–æ–≥–æ —è–≤–ª—è–µ—Ç—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º</p>

            <h:form>
                <h:commandButton value="üöÄ –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é"
                                 action="#{specialOperationsBean.findCreatureWithMaxCreationDate}"
                                 styleClass="btn btn-primary"/>
            </h:form>

            <ui:fragment rendered="#{specialOperationsBean.creatureWithMaxCreationDate != null}">
                <div class="result-box">
                    <h4>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:</h4>
                    <table class="table">
                        <tr>
                            <th>ID</th>
                            <td>#{specialOperationsBean.creatureWithMaxCreationDate.id}</td>
                        </tr>
                        <tr>
                            <th>–ò–º—è</th>
                            <td>#{specialOperationsBean.creatureWithMaxCreationDate.name}</td>
                        </tr>
                        <tr>
                            <th>–¢–∏–ø</th>
                            <td>#{specialOperationsBean.creatureWithMaxCreationDate.creatureType}</td>
                        </tr>
                        <tr>
                            <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                            <td>#{specialOperationsBean.creatureWithMaxCreationDate.creationDate}</td>
                        </tr>
                        <tr>
                            <th>–í–æ–∑—Ä–∞—Å—Ç</th>
                            <td>#{specialOperationsBean.creatureWithMaxCreationDate.age}</td>
                        </tr>
                        <tr>
                            <th>–£—Ä–æ–≤–µ–Ω—å –∞—Ç–∞–∫–∏</th>
                            <td>#{specialOperationsBean.creatureWithMaxCreationDate.attackLevel}</td>
                        </tr>
                    </table>
                </div>
            </ui:fragment>
        </div>

        <!-- –û–ø–µ—Ä–∞—Ü–∏—è 3: –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–ª—å—Ü–∞ -->
        <div class="operation-section">
            <div class="operation-header">
                <h3>üíç –û–ø–µ—Ä–∞—Ü–∏—è 3: –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–ª—å—Ü–∞</h3>
            </div>
            <p>–í–µ—Ä–Ω—É—Ç—å –º–∞—Å—Å–∏–≤ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–ª—è ring –ø–æ –≤—Å–µ–º –æ–±—ä–µ–∫—Ç–∞–º</p>

            <h:form>
                <h:commandButton value="üöÄ –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é"
                                 action="#{specialOperationsBean.findUniqueRings}"
                                 styleClass="btn btn-info"/>
            </h:form>

            <ui:fragment rendered="#{specialOperationsBean.uniqueRings != null and !specialOperationsBean.uniqueRings.isEmpty()}">
                <div class="result-box">
                    <h4>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–∞–π–¥–µ–Ω–æ #{specialOperationsBean.uniqueRings.size()} —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–ª–µ—Ü</h4>
                    <table class="table">
                        <tr>
                            <th>ID</th>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th>–°–∏–ª–∞</th>
                            <th>–í–µ—Å</th>
                        </tr>
                        <ui:repeat value="#{specialOperationsBean.uniqueRings}" var="ring">
                            <tr>
                                <td>#{ring.id}</td>
                                <td>#{ring.name}</td>
                                <td>#{ring.power != null ? ring.power : '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}</td>
                                <td>#{ring.weight}</td>
                            </tr>
                        </ui:repeat>
                    </table>
                </div>
            </ui:fragment>

            <ui:fragment rendered="#{specialOperationsBean.uniqueRings != null and specialOperationsBean.uniqueRings.isEmpty()}">
                <div class="result-box">
                    <p>‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–ª–µ—Ü</p>
                </div>
            </ui:fragment>
        </div>

        <!-- –û–ø–µ—Ä–∞—Ü–∏—è 4: –ó–∞–±—Ä–∞—Ç—å –∫–æ–ª—å—Ü–∞ —É —Ö–æ–±–±–∏—Ç–æ–≤ -->
        <div class="operation-section">
            <div class="operation-header">
                <h3>üëπ –û–ø–µ—Ä–∞—Ü–∏—è 4: –ó–∞–±—Ä–∞—Ç—å –∫–æ–ª—å—Ü–∞ —É —Ö–æ–±–±–∏—Ç–æ–≤</h3>
            </div>
            <p>–ó–∞–±—Ä–∞—Ç—å –≤—Å–µ –∫–æ–ª—å—Ü–∞ —É —Ö–æ–±–±–∏—Ç–æ–≤</p>

            <h:form>
                <h:commandButton value="üöÄ –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é"
                                 action="#{specialOperationsBean.takeRingsFromHobbits}"
                                 styleClass="btn btn-warning"
                                 onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–±—Ä–∞—Ç—å –∫–æ–ª—å—Ü–∞ —É —Ö–æ–±–±–∏—Ç–æ–≤?')"/>
            </h:form>
        </div>

        <!-- –û–ø–µ—Ä–∞—Ü–∏—è 5: –£–Ω–∏—á—Ç–æ–∂–∏—Ç—å –≥–æ—Ä–æ–¥–∞ —ç–ª—å—Ñ–æ–≤ -->
        <div class="operation-section">
            <div class="operation-header">
                <h3>üî• –û–ø–µ—Ä–∞—Ü–∏—è 5: –£–Ω–∏—á—Ç–æ–∂–∏—Ç—å –≥–æ—Ä–æ–¥–∞ —ç–ª—å—Ñ–æ–≤</h3>
            </div>
            <p>–£–Ω–∏—á—Ç–æ–∂–∏—Ç—å –≥–æ—Ä–æ–¥–∞ —ç–ª—å—Ñ–æ–≤</p>

            <h:form>
                <div class="form-group">
                    <h:outputLabel for="targetCity" value="–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ —Å –∂–∏—Ç–µ–ª—è–º–∏:"/>
                    <h:selectOneMenu id="targetCity" value="#{specialOperationsBean.targetCityId}"
                                     styleClass="select-wide">
                        <f:selectItem itemLabel="–û—Å—Ç–∞–≤–∏—Ç—å –∂–∏—Ç–µ–ª–µ–π –±–µ–∑ –¥–æ–º–∞" itemValue="#{null}"/>
                        <f:selectItems value="#{specialOperationsBean.nonElfCities}"
                                       var="city"
                                       itemLabel="#{city.name} (ID: #{city.id})"
                                       itemValue="#{city.id}"/>
                    </h:selectOneMenu>
                </div>

                <h:commandButton value="üöÄ –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é"
                                 action="#{specialOperationsBean.destroyElfCities}"
                                 styleClass="btn btn-danger"
                                 onclick="return confirm('–í–ù–ò–ú–ê–ù–ò–ï! –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ. –£–Ω–∏—á—Ç–æ–∂–∏—Ç—å –≥–æ—Ä–æ–¥–∞ —ç–ª—å—Ñ–æ–≤?')"/>
            </h:form>

            <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ -->
            <ui:fragment rendered="#{specialOperationsBean.destroyedElfCities != null and !specialOperationsBean.destroyedElfCities.isEmpty()}">
                <div class="result-box">
                    <h4>üèóÔ∏è –£–Ω–∏—á—Ç–æ–∂–µ–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞ —ç–ª—å—Ñ–æ–≤ (–ø–æ–∫–∞–∑–∞–Ω—ã –ø–µ—Ä–≤—ã–µ #{specialOperationsBean.destroyedElfCities.size()}):</h4>
                    <table class="table">
                        <tr>
                            <th>ID</th>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th>–ü–ª–æ—â–∞–¥—å</th>
                            <th>–ù–∞—Å–µ–ª–µ–Ω–∏–µ</th>
                            <th>–ü—Ä–∞–≤–∏—Ç–µ–ª—å</th>
                        </tr>
                        <ui:repeat value="#{specialOperationsBean.destroyedElfCities}" var="city">
                            <tr>
                                <td>#{city.id}</td>
                                <td>#{city.name}</td>
                                <td>#{city.area}</td>
                                <td>#{city.population}</td>
                                <td>#{city.governor}</td>
                            </tr>
                        </ui:repeat>
                    </table>
                </div>
            </ui:fragment>
        </div>
    </div>
</h:body>
</html>

