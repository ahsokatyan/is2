<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">


<h:head>
   <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª—å—Ü–∞–º–∏</title>
   <script src="#{request.contextPath}/js/websocket-updates.js"></script>
      <h:outputStylesheet library="css" name="styles.css"/>
</h:head>

<h:body>
   <div class="container">
      <h1>üíç –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞–≥–∏—á–µ—Å–∫–∏–º–∏ –∫–æ–ª—å—Ü–∞–º–∏</h1>

      <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
      <div class="section-bottom">
         <h:form>
            <h:commandButton value="üè† –ì–ª–∞–≤–Ω–∞—è" action="#{navigationBean.goToHome}" styleClass="btn"/>
            <h:commandButton value="üìñ –°—É—â–µ—Å—Ç–≤–∞" action="#{navigationBean.goToCreatures}" styleClass="btn"/>
            <h:commandButton value="üèôÔ∏è –ì–æ—Ä–æ–¥–∞" action="#{navigationBean.goToCities}" styleClass="btn"/>
<!--            <h:link outcome="create-ring" value="‚ûï –°–æ–∑–¥–∞—Ç—å –∫–æ–ª—å—Ü–æ" styleClass="btn btn-primary"/>-->
         </h:form>
      </div>

      <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö/—É—Å–ø–µ—Ö–µ -->
      <h:messages globalOnly="false" styleClass="messages" infoClass="success" errorClass="error"/>
      <div class="card">
         <h3>üîç –ü–æ–∏—Å–∫ –∫–æ–ª—å—Ü–∞ –ø–æ ID</h3>
         <h:form>
            <div class="inline-form">
               <h:inputText value="#{navigationBean.searchId}" required="true"
                            styleClass="input-short"
                            placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∫–æ–ª—å—Ü–∞" label="–ó–Ω–∞—á–µ–Ω–∏–µ ID"/>
               <h:commandButton value="–ù–∞–π—Ç–∏" action="#{navigationBean.searchRing}"
                                styleClass="btn btn-wide"/>
            </div>
         </h:form>
      </div>
      <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å—É—â–µ—Å—Ç–≤–∞ -->
      <div class="section-bottom">
         <h:link outcome="create-ring" value="‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –∫–æ–ª—å—Ü–æ" styleClass="btn btn-primary btn-lg"/>
      </div>

      <!-- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è -->
      <div class="card-muted">
         <h3>üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–æ–ª–µ—Ü</h3>
         <h:form>
            <div class="inline-form">
               <h:inputText value="#{ringListBean.filterName}"
                            styleClass="input-medium"
                            placeholder="–í–≤–µ–¥–∏—Ç–µ —á–∞—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–ª—å—Ü–∞"/>
               <h:commandButton value="üîç –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å"
                                action="#{ringListBean.filterRings}"
                                styleClass="btn btn-wide"/>
               <h:commandButton value="‚ùå –°–±—Ä–æ—Å"
                                action="#{ringListBean.resetFilter}"
                                styleClass="btn btn-wide"/>
            </div>
            <ui:fragment class="text-muted mt-10"
               rendered="#{ringListBean.filterName != null and ringListBean.filterName != ''}">
               –§–∏–ª—å—Ç—Ä: "#{ringListBean.filterName}"
            </ui:fragment>
         </h:form>
      </div>

      <hr/>

      <!-- –¢–∞–±–ª–∏—Ü–∞ –∫–æ–ª–µ—Ü -->
      <h3>üìã –°–ø–∏—Å–æ–∫ –∫–æ–ª–µ—Ü (–í—Å–µ–≥–æ: #{ringListBean.totalCount})</h3>

      <h:form id="listForm">
         <h:dataTable value="#{ringListBean.rings}" var="ring" styleClass="table">
            <h:column>
               <f:facet name="header">
                  <h:commandLink action="#{ringListBean.sortBy('id')}" styleClass="sortable-link">
                     ID#{ringListBean.getSortIndicator('id')}
                  </h:commandLink>
               </f:facet>
               #{ring.id}
            </h:column>

            <h:column>
               <f:facet name="header">
                  <h:commandLink action="#{ringListBean.sortBy('name')}" styleClass="sortable-link">
                     –ù–∞–∑–≤–∞–Ω–∏–µ#{ringListBean.getSortIndicator('name')}
                  </h:commandLink>
               </f:facet>
               #{ring.name}
            </h:column>

            <h:column>
               <f:facet name="header">
                  <h:commandLink action="#{ringListBean.sortBy('power')}" styleClass="sortable-link">
                     –°–∏–ª–∞#{ringListBean.getSortIndicator('power')}
                  </h:commandLink>
               </f:facet>
               #{ring.power != null ? ring.power : '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}
            </h:column>

            <h:column>
               <f:facet name="header">
                  <h:commandLink action="#{ringListBean.sortBy('weight')}" styleClass="sortable-link">
                     –í–µ—Å#{ringListBean.getSortIndicator('weight')}
                  </h:commandLink>
               </f:facet>
               #{ring.weight}
            </h:column>

            <h:column>
               <f:facet name="header">–î–µ–π—Å—Ç–≤–∏—è</f:facet>
               <h:link outcome="view-ring" value="üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä" styleClass="action-link">
                  <f:param name="id" value="#{ring.id}"/>
               </h:link>
               <h:link outcome="edit-ring" value="‚úèÔ∏è –†–µ–¥–∞–∫—Ç." styleClass="action-link">
                  <f:param name="id" value="#{ring.id}"/>
               </h:link>
               <h:link outcome="delete-ring" value="üóëÔ∏è –£–¥–∞–ª–∏—Ç—å">
                  <f:param name="id" value="#{ring.id}"/>
               </h:link>
            </h:column>
         </h:dataTable>

         <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
         <div class="pagination">
            <h:commandButton value="‚èÆÔ∏è –ü–µ—Ä–≤–∞—è"
                             action="#{ringListBean.firstPage}"
                             disabled="#{ringListBean.currentPage == 1}"
                             styleClass="btn"/>

            <h:commandButton value="‚óÄÔ∏è –ù–∞–∑–∞–¥"
                             action="#{ringListBean.previousPage}"
                             disabled="#{ringListBean.currentPage == 1}"
                             styleClass="btn"/>

            <span class="page-indicator">
                    –°—Ç—Ä–∞–Ω–∏—Ü–∞ #{ringListBean.currentPage} –∏–∑ #{ringListBean.totalPages}
                </span>

            <h:commandButton value="–í–ø–µ—Ä–µ–¥ ‚ñ∂Ô∏è"
                             action="#{ringListBean.nextPage}"
                             disabled="#{ringListBean.currentPage >= ringListBean.totalPages}"
                             styleClass="btn"/>

            <h:commandButton value="–ü–æ—Å–ª–µ–¥–Ω—è—è ‚è≠Ô∏è"
                             action="#{ringListBean.lastPage}"
                             disabled="#{ringListBean.currentPage >= ringListBean.totalPages}"
                             styleClass="btn"/>

            <div class="text-muted mt-10">
               –ü–æ–∫–∞–∑–∞–Ω–æ #{ringListBean.rings.size()} –∏–∑ #{ringListBean.totalCount} –∫–æ–ª–µ—Ü
               (–ø–æ 20 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ)
            </div>
         </div>
      </h:form>
   </div>
</h:body>
</html>


